(function(){'use strict';function p(b,c,a){const g=[];var d=0;for(var e=c;e<c+a;e++)g[d]="0x"+b.getUint8(e).toString(16),d++;{b="";const f=g.length;for(c=0;c<f;)switch(a=g[c++],a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=String.fromCharCode(a);break;case 12:case 13:d=g[c++];b+=String.fromCharCode((a&31)<<6|d&63);break;case 14:d=g[c++],e=g[c++],b+=String.fromCharCode((a&15)<<12|(d&63)<<6|(e&63)<<0)}}return b}
function u(b,c,a,g,d){const e=b.getUint16(a,!d),f={};let h,n,m;for(m=0;m<e;m++)h=a+12*m+2,n=g[b.getUint16(h,!d)],f[n]=v(b,h,c,d);return f}
function v(b,c,a,g){var d=b.getUint16(c+2,!g);const e=b.getUint32(c+4,!g);a=b.getUint32(c+8,!g)+a;let f,h;switch(d){case 1:case 7:if(1==e)return b.getUint8(c+8);a=4<e?a:c+8;c=[];for(d=0;d<e;d++)c[d]=b.getUint8(a+d);return c;case 2:return p(b,4<e?a:c+8,e-1);case 3:if(1==e)return b.getUint16(c+8,!g);a=2<e?a:c+8;c=[];for(d=0;d<e;d++)c[d]=b.getUint16(a+2*d,!g);return c;case 4:if(1==e)return b.getUint32(c+8,!g);c=[];for(d=0;d<e;d++)c[d]=b.getUint32(a+4*d,!g);return c;case 5:if(1==e)return f=b.getUint32(a,
!g),h=b.getUint32(a+4,!g),b=new Number(f/h),b.f=f,b.c=h,b;c=[];for(d=0;d<e;d++)f=b.getUint32(a+8*d,!g),h=b.getUint32(a+4+8*d,!g),c[d]=new Number(f/h),c[d].f=f,c[d].c=h;return c;case 9:if(1==e)return b.getInt32(c+8,!g);c=[];for(d=0;d<e;d++)c[d]=b.getInt32(a+4*d,!g);return c;case 10:if(1==e)return b.getInt32(a,!g)/b.getInt32(a+4,!g);c=[];for(d=0;d<e;d++)c[d]=b.getInt32(a+8*d,!g)/b.getInt32(a+4+8*d,!g);return c}};const w={[120]:"Caption-Abstract",[110]:"Credit",[25]:"Keywords",[55]:"DateCreated",[80]:"By-line",[85]:"By-lineTitle",[122]:"Writer-Editor",[105]:"Headline",[116]:"CopyrightNotice",[15]:"Category"};const x={[256]:"ImageWidth",[257]:"ImageHeight",[258]:"BitsPerSample",[259]:"Compression",[262]:"PhotometricInterpretation",[273]:"StripOffsets",[274]:"Orientation",[277]:"SamplesPerPixel",[278]:"RowsPerStrip",[279]:"StripByteCounts",[282]:"XResolution",[283]:"YResolution",[284]:"PlanarConfiguration",[296]:"ResolutionUnit",[513]:"JpegIFOffset",[514]:"JpegIFByteCount",[529]:"YCbCrCoefficients",[530]:"YCbCrSubSampling",[531]:"YCbCrPositioning",[532]:"ReferenceBlackWhite"};const y={[256]:"ImageWidth",[257]:"ImageHeight",[34665]:"ExifIFDPointer",[34853]:"GPSInfoIFDPointer",[40965]:"InteroperabilityIFDPointer",[258]:"BitsPerSample",[259]:"Compression",[262]:"PhotometricInterpretation",[274]:"Orientation",[277]:"SamplesPerPixel",[284]:"PlanarConfiguration",[530]:"YCbCrSubSampling",[531]:"YCbCrPositioning",[282]:"XResolution",[283]:"YResolution",[296]:"ResolutionUnit",[273]:"StripOffsets",[278]:"RowsPerStrip",[279]:"StripByteCounts",[513]:"JPEGInterchangeFormat",[514]:"JPEGInterchangeFormatLength",
[301]:"TransferFunction",[318]:"WhitePoint",[319]:"PrimaryChromaticities",[529]:"YCbCrCoefficients",[532]:"ReferenceBlackWhite",[306]:"DateTime",[270]:"ImageDescription",[271]:"Make",[272]:"Model",[305]:"Software",[315]:"Artist",[33432]:"Copyright"};const z={[36864]:"ExifVersion",[40960]:"FlashpixVersion",[40961]:"ColorSpace",[40962]:"PixelXDimension",[40963]:"PixelYDimension",[37121]:"ComponentsConfiguration",[37122]:"CompressedBitsPerPixel",[37500]:"MakerNote",[37510]:"UserComment",[40964]:"RelatedSoundFile",[36867]:"DateTimeOriginal",[36868]:"DateTimeDigitized",[37520]:"SubsecTime",[37521]:"SubsecTimeOriginal",[37522]:"SubsecTimeDigitized",[33434]:"ExposureTime",[33437]:"FNumber",[34850]:"ExposureProgram",[34852]:"SpectralSensitivity",[34855]:"ISOSpeedRatings",
[34856]:"OECF",[37377]:"ShutterSpeedValue",[37378]:"ApertureValue",[37379]:"BrightnessValue",[37380]:"ExposureBias",[37381]:"MaxApertureValue",[37382]:"SubjectDistance",[37383]:"MeteringMode",[37384]:"LightSource",[37385]:"Flash",[37396]:"SubjectArea",[37386]:"FocalLength",[41483]:"FlashEnergy",[41484]:"SpatialFrequencyResponse",[41486]:"FocalPlaneXResolution",[41487]:"FocalPlaneYResolution",[41488]:"FocalPlaneResolutionUnit",[41492]:"SubjectLocation",[41493]:"ExposureIndex",[41495]:"SensingMethod",
[41728]:"FileSource",[41729]:"SceneType",[41730]:"CFAPattern",[41985]:"CustomRendered",[41986]:"ExposureMode",[41987]:"WhiteBalance",[41988]:"DigitalZoomRation",[41989]:"FocalLengthIn35mmFilm",[41990]:"SceneCaptureType",[41991]:"GainControl",[41992]:"Contrast",[41993]:"Saturation",[41994]:"Sharpness",[41995]:"DeviceSettingDescription",[41996]:"SubjectDistanceRange",[40965]:"InteroperabilityIFDPointer",[42016]:"ImageUniqueID"};const A={[0]:"GPSVersionID",[1]:"GPSLatitudeRef",[2]:"GPSLatitude",[3]:"GPSLongitudeRef",[4]:"GPSLongitude",[5]:"GPSAltitudeRef",[6]:"GPSAltitude",[7]:"GPSTimeStamp",[8]:"GPSSatellites",[9]:"GPSStatus",[10]:"GPSMeasureMode",[11]:"GPSDOP",[12]:"GPSSpeedRef",[13]:"GPSSpeed",[14]:"GPSTrackRef",[15]:"GPSTrack",[16]:"GPSImgDirectionRef",[17]:"GPSImgDirection",[18]:"GPSMapDatum",[19]:"GPSDestLatitudeRef",[20]:"GPSDestLatitude",[21]:"GPSDestLongitudeRef",[22]:"GPSDestLongitude",[23]:"GPSDestBearingRef",
[24]:"GPSDestBearing",[25]:"GPSDestDistanceRef",[26]:"GPSDestDistance",[27]:"GPSProcessingMethod",[28]:"GPSAreaInformation",[29]:"GPSDateStamp",[30]:"GPSDifferential"};const B=b=>{const [c,a,g,d,e,f]=b.split(/\D/);return new Date(c,a-1,g,d,e,f)};function C(b,c,a={}){const {coordinates:g="dms",parseDates:d=!1}=a;if("Exif"!=p(b,c,4))return!1;a=c+6;if(18761==b.getUint16(a))var e=!1;else if(19789==b.getUint16(a))e=!0;else return!1;if(42!=b.getUint16(a+2,!e))return!1;var f=b.getUint32(a+4,!e);if(8>f)return!1;c=u(b,a,a+f,y,e);d&&c.DateTime&&(c.DateTime=B(c.DateTime));const {ExifIFDPointer:h,GPSInfoIFDPointer:n}=c;if(h){var m=u(b,a,a+h,z,e);for(l in m){var k=m[l];switch(l){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":k=
D[l][k];break;case "DateTimeOriginal":case "DateTimeDigitized":d&&(k=B(k));break;case "ExifVersion":case "FlashpixVersion":k=String.fromCharCode(k[0],k[1],k[2],k[3]);break;case "ComponentsConfiguration":k=D.Components[k[0]]+D.Components[k[1]]+D.Components[k[2]]+D.Components[k[3]]}c[l]=k}}if(n){m=u(b,a,a+n,A,e);for(l in m){k=m[l];switch(l){case "GPSVersionID":{const [q,r,t,E]=k;k=[q,r,t,E].join(".")}}c[l]=k}if("dd"==g){if(c.GPSLongitude){const [q,r,t]=c.GPSLongitude;var l=c.GPSLongitudeRef;c.GPSLongitude=
(q+r/60+t/3600)*("S"==l||"W"==l?-1:1)}if(c.GPSLatitude){const [q,r,t]=c.GPSLatitude;l=c.GPSLatitudeRef;c.GPSLatitude=(q+r/60+t/3600)*("S"==l||"W"==l?-1:1)}}}f=a+f;l=b.getUint16(f,!e);if(f=b.getUint32(f+2+12*l,!e))if(f>b.byteLength)b={};else{f=u(b,a,a+f,x,e);if(f.Compression)switch(f.Compression){case 6:f.b&&f.a&&(f.blob=new Blob([new Uint8Array(b.buffer,a+f.b,f.a)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",
f.Compression)}else 2==f.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");b=f}else b={};c.thumbnail=b;return c}
const D={ExposureProgram:{[0]:"Not defined",[1]:"Manual",[2]:"Normal program",[3]:"Aperture priority",[4]:"Shutter priority",[5]:"Creative program",[6]:"Action program",[7]:"Portrait mode",[8]:"Landscape mode"},MeteringMode:{[0]:"Unknown",[1]:"Average",[2]:"CenterWeightedAverage",[3]:"Spot",[4]:"MultiSpot",[5]:"Pattern",[6]:"Partial",[255]:"Other"},LightSource:{[0]:"Unknown",[1]:"Daylight",[2]:"Fluorescent",[3]:"Tungsten (incandescent light)",[4]:"Flash",[9]:"Fine weather",[10]:"Cloudy weather",[11]:"Shade",
[12]:"Daylight fluorescent (D 5700 - 7100K)",[13]:"Day white fluorescent (N 4600 - 5400K)",[14]:"Cool white fluorescent (W 3900 - 4500K)",[15]:"White fluorescent (WW 3200 - 3700K)",[17]:"Standard light A",[18]:"Standard light B",[19]:"Standard light C",[20]:"D55",[21]:"D65",[22]:"D75",[23]:"D50",[24]:"ISO studio tungsten",[255]:"Other"},Flash:{[0]:"Flash did not fire",[1]:"Flash fired",[5]:"Strobe return light not detected",[7]:"Strobe return light detected",[9]:"Flash fired, compulsory flash mode",
[13]:"Flash fired, compulsory flash mode, return light not detected",[15]:"Flash fired, compulsory flash mode, return light detected",[16]:"Flash did not fire, compulsory flash mode",[24]:"Flash did not fire, auto mode",[25]:"Flash fired, auto mode",[29]:"Flash fired, auto mode, return light not detected",[31]:"Flash fired, auto mode, return light detected",[32]:"No flash function",[65]:"Flash fired, red-eye reduction mode",[69]:"Flash fired, red-eye reduction mode, return light not detected",[71]:"Flash fired, red-eye reduction mode, return light detected",
[73]:"Flash fired, compulsory flash mode, red-eye reduction mode",[77]:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",[79]:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",[89]:"Flash fired, auto mode, red-eye reduction mode",[93]:"Flash fired, auto mode, return light not detected, red-eye reduction mode",[95]:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{[1]:"Not defined",[2]:"One-chip color area sensor",
[3]:"Two-chip color area sensor",[4]:"Three-chip color area sensor",[5]:"Color sequential area sensor",[7]:"Trilinear sensor",[8]:"Color sequential linear sensor"},SceneCaptureType:{[0]:"Standard",[1]:"Landscape",[2]:"Portrait",[3]:"Night scene"},SceneType:{[1]:"Directly photographed"},CustomRendered:{[0]:"Normal process",[1]:"Custom process"},WhiteBalance:{[0]:"Auto white balance",[1]:"Manual white balance"},GainControl:{[0]:"None",[1]:"Low gain up",[2]:"High gain up",[3]:"Low gain down",[4]:"High gain down"},
Contrast:{[0]:"Normal",[1]:"Soft",[2]:"Hard"},Saturation:{[0]:"Normal",[1]:"Low saturation",[2]:"High saturation"},Sharpness:{[0]:"Normal",[1]:"Soft",[2]:"Hard"},SubjectDistanceRange:{[0]:"Unknown",[1]:"Macro",[2]:"Close view",[3]:"Distant view"},FileSource:{[3]:"DSC"},Components:{[0]:"",[1]:"Y",[2]:"Cb",[3]:"Cr",[4]:"R",[5]:"G",[6]:"B"}};window.EXIF={handleBinaryFile:function(b,c){a:{var a=new DataView(b);if(255!=a.getUint8(0)||216!=a.getUint8(1))c=!1;else{for(var g=b.byteLength,d=2,e;d<g;){if(255!=a.getUint8(d)){c=!1;break a}e=a.getUint8(d+1);if(225==e){c=C(a,d+4,c);break a}d+=2+a.getUint16(d+2)}c=void 0}}a:if(d=new DataView(b),255!=d.getUint8(0)||216!=d.getUint8(1))b=!1;else{g=2;for(e=b.byteLength;g<e;){a=d;var f=g;if(56===a.getUint8(f)&&66===a.getUint8(f+1)&&73===a.getUint8(f+2)&&77===a.getUint8(f+3)&&4===a.getUint8(f+4)&&4===
a.getUint8(f+5)){a=d.getUint8(g+7);0!==a%2&&(a+=1);0===a&&(a=4);e=g+8+a;d=d.getUint16(g+6+a);g=e;e=new DataView(b);b={};for(a=g;a<g+d;){if(28===e.getUint8(a)&&2===e.getUint8(a+1)){var h=e.getUint8(a+2);h in w&&(f=e.getInt16(a+3),h=w[h],f=p(e,a+5,f),b.hasOwnProperty(h)?b[h]instanceof Array?b[h].push(f):b[h]=[b[h],f]:b[h]=f)}a++}break a}g++}b=void 0}return{data:c,iptcdata:b}}};}).call(this);

//# sourceMappingURL=exif.js.map